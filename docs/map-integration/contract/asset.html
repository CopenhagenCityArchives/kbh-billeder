<!DOCTYPE html>
<html>
<head>
    <title>Map Search documentation</title>

    <link rel="stylesheet" href="single.css" type="text/css"/>
    <style>
        /* from "main.css" */
        @font-face {
            font-family: 'FFUnitWebMedium';
            src: url('../../../app/styles/webfonts/3140D6_0_0.eot');
            src: url('../../../app/styles/webfonts/3140D6_0_0.eot?#iefix') format('embedded-opentype'), url('../../../app/styles/webfonts/3140D6_0_0.woff2') format('woff2'), url('../../../app/styles/webfonts/3140D6_0_0.woff') format('woff'), url('../../../app/styles/webfonts/3140D6_0_0.ttf') format('truetype');
        }

        @font-face {
            font-family: 'FFUnitWebThin';
            src: url('../../../app/styles/webfonts/3140D6_1_0.eot');
            src: url('../../../app/styles/webfonts/3140D6_1_0.eot?#iefix') format('embedded-opentype'), url('../../../app/styles/webfonts/3140D6_1_0.woff2') format('woff2'), url('../../../app/styles/webfonts/3140D6_1_0.woff') format('woff'), url('../../../app/styles/webfonts/3140D6_1_0.ttf') format('truetype');
        }

        @font-face {
            font-family: 'FFUnitWebLight';
            src: url('../../../app/styles/webfonts/3140D6_2_0.eot');
            src: url('../../../app/styles/webfonts/3140D6_2_0.eot?#iefix') format('embedded-opentype'), url('../../../app/styles/webfonts/3140D6_2_0.woff2') format('woff2'), url('../../../app/styles/webfonts/3140D6_2_0.woff') format('woff'), url('../../../app/styles/webfonts/3140D6_2_0.ttf') format('truetype');
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: FFUnitWebLight,sans-serif;
            line-height: 1.6;
            color: #555;
        }
    </style>
    <link rel="stylesheet" href="../../../app/styles/map-shared.css" type="text/css" />

    <script src="../../../app/scripts/ol.js"></script>
    <script src="../../../app/scripts/historisk-atlas.js"></script>
    <script language="JavaScript">
      var module = {exports: {}};
    </script>
    <script src="../../../app/scripts-browserify/map-controller.js"></script>
    <script language="JavaScript">

      (function(){
          //MapController for demo purpose
          var MC = (function () {
              var ha;
              function MC() {

                  //create and init map object
                  ha = HistoriskAtlas(
                    document.getElementById('map'),
                    {
                        mode: 'single',
                        center: [12.35760, 55.71490],
                        zoomLevel: 16,
                        icons: {
                            asset: '/app/images/icons/map/pinselected.png',
                            assetHeading: '/app/images/icons/map/pinheadingselected.png',
                            assetEdit: '/app/images/icons/map/pinedit.png',
                            assetHeadingEdit: '/app/images/icons/map/pinheadingedit.png',
                            camera: '/app/images/icons/map/camera.png',
                            target: '/app/images/icons/map/pintarget.png',
                            image: '/app/images/icons/map/image.png'
                        }
                    }
                  );

                  var xhr = new XMLHttpRequest();
                  xhr.open('GET', 'asset-single-asset.json', true);
                  xhr.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
                  xhr.onload = function (e) {
                      console.log("Showing");
                      ha.show([JSON.parse(xhr.responseText)]);
                      ha.show([JSON.parse(xhr.responseText)]);
                  };
                  xhr.send(null);
              }

              MC.prototype.toggleEdit = function() {
                  var asset = ha.toggleEditMode();
                  console.log("updated coordinates: " + asset.latitude + " , " + asset.longitude);
                  console.log("updated heading: " + asset.heading);
              }

              return MC;
          }());

          window.onload = function () {
              //create and init map controller object
              var mc = new MC();

              document.getElementById("toggleedit").onclick = function () {
                  mc.toggleEdit();
              }
          };

      })();
    </script>
    <style>
        #map {
            width: 1000px;
            height: 600px;
        }
    </style>
</head>
<body>

    <div id="map"></div>
    <br>
    <input type="button" id="toggleedit" value="Toggle edit mode" />

</body>
</html>