mixin analytics
  script.
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2930791-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

mixin head
  base(href='/')

  meta(charset='utf-8')
  meta(http-equiv='X-UA-Compatible', content='IE=edge')
  meta(name='description', content='')
  meta(name='viewport', content='width=device-width')

  link(rel='stylesheet', href='styles/main.css')

mixin header
  header
    .header
      h2.small
        a
          | Nationalmuseet
          span.caret &nbsp;
      hgroup.hidden
        ul.nav.nav-pills
          li
            a(href="#") Hjælp
          li
            a(href="#") Kontakt

mixin footer
  footer
    .footer
      address
        | Nationalmuseet<br>Prinsens Palæ<br>Ny Vestergade 10<br>DK-1471 København K<br>Tel. +45 3313 4411

      h2 Følg os på:
      ul
        each val in ['Facebook', 'Twitter', 'YouTube']
          li= val

mixin samlingerHeader()
  .container
    .col-xs-10
      +searchBox()
    .col-xs-2
      +navigation()



mixin searchBox()
  - var path = (req.path).split('/')
  form(action='/' + path[1])
    .form-group
      div(class='input-group')
        input(type='text', class='form-control', placeholder=req.param('q') || 'Søg', name='q'
              value=req.param('q') || nothing,
              ng-model='asyncSelected',
              typeahead='term for item in helpers.typeahead_result')
        .input-group-btn
          button(type="submit", class="btn btn-default") Søg

mixin navigation()
  nav.categories-menu.dropdown.pull-right
    h2(data-toggle='dropdown')#heading-categories-menu.dropdown-toggle
      a(href='#')
        span.sr-only Kategorier
        | &#9776;
    - var catalog_aliases = {"Alle": "ALL","Antiksamlingen": "AS","Bevaringsafdelingen": "BA","Danmarks Middelalder og Renæssance": "DMR","Danmarks Nyere Tid": "DNT","Etnografisk samling": "ES","Frihedsmuseet": "FHM","Den Kgl. Mønt- og Medaljesamling": "KMM","Musikmuseet": "MUM"}
    ul(aria-labelledby='heading-categories-menu', role='menu').dropdown-menu.dropdown-menu-right
      each alias, name in catalog_aliases
        li
          a(href='/#{(alias!=="ALL") ? alias : ""}', role='menu-item')= name


mixin responsiveImage(title)
  span(data-picture, data-alt=title)

    span(data-src=image_src_set['400'], data-media='(max-width: 400px)')
    span(data-src=image_src_set['800'], data-media='(min-width: 400px)')
    span(data-src=image_src_set['1200'], data-media='(min-width: 800px)')

    noscript
      img(src=image_src, alt=title, title=title)


